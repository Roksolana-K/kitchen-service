{% extends 'layouts/base-presentation.html' %}
{% load crispy_forms_filters %}

{% block title %} Dish List {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block body_class %} index-page {% endblock body_class %}

{% block content %}

  <header class="header-2">
    <div class="page-header section-height-50 relative" style="background-image: url('https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=2080&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 text-center mx-auto">
            <h2 class="text-white mb-4">
              Our Dishes Collection
            </h2>
            <p class="text-white opacity-8">
              Browse and manage all available dishes
            </p>
          </div>
        </div>
      </div>
    </div>
  </header>

  <section class="pt-5 pb-4">
    <div class="container">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">Our Menu</h2>
            <a href="{% url 'kitchen:dish-create' %}" class="btn btn-primary btn-sm mb-0">
              <i class="fas fa-plus me-2"></i> Add New Dish
            </a>
          </div>

          <form method="get" class="mb-5">
            <div class="input-group input-group-lg">
              <input
                type="text"
                name="search"
                class="form-control border-radius-lg"
                placeholder="Search by dish name or dish type..."
                value="{{ request.GET.search|default_if_none:'' }}"
              >
              <button class="btn btn-primary btn-lg ms-2 mb-0" type="submit">
                <i class="fas fa-search me-2"></i> Search
              </button>
            </div>
          </form>

          {% if dish_list %}
            <div class="card shadow-lg">
              <div class="table-responsive">
                <table class="table align-items-center mb-0">
                  <thead>
                    <tr>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Dish Name</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Price</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Dish Type</th>
                      <th class="text-secondary opacity-7"></th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for dish in dish_list %}
                    <tr>
                      <td>
                        <div class="d-flex px-2 py-1">
                          <div class="d-flex flex-column justify-content-center">
                            <h6 class="mb-0 text-sm">
                              <a href="{% url 'kitchen:dish-detail' dish.id %}" class="text-dark font-weight-bold">{{ dish.name }}</a>
                            </h6>
                          </div>
                        </div>
                      </td>
                      <td>
                        <p class="text-sm font-weight-bold mb-0">${{ dish.price|default:"-" }}</p>
                      </td>
                      <td>
                        <span class="badge badge-sm bg-gradient-success">{{ dish.dish_type.name|default:"-" }}</span>
                      </td>
                      <td class="align-middle">
                        <a href="{% url 'kitchen:dish-detail' dish.id %}" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="View details">
                          View
                        </a>
                      </td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          {% else %}
            <div class="card shadow-lg">
              <div class="card-body text-center p-5">
                <i class="fas fa-utensils fa-4x text-gray-300 mb-3"></i>
                <h5 class="text-gray-600">No dishes available yet</h5>
                <p class="text-gray-500 mb-4">Be the first to add a delicious dish to our collection!</p>
                <a href="{% url 'kitchen:dish-create' %}" class="btn btn-primary btn-sm">
                  <i class="fas fa-plus me-2"></i> Create Dish
                </a>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </section>

{% endblock content %}

<!-- Specific JS goes HERE -->
{% block javascripts %}
  <script src="{{ ASSETS_ROOT }}/js/plugins/countup.min.js"></script>
  <script src="{{ ASSETS_ROOT }}/js/plugins/choices.min.js"></script>
  <script src="{{ ASSETS_ROOT }}/js/plugins/rellax.min.js"></script>
  <script src="{{ ASSETS_ROOT }}/js/plugins/tilt.min.js"></script>
  <script src="{{ ASSETS_ROOT }}/js/plugins/choices.min.js"></script>
  <script src="{{ ASSETS_ROOT }}/js/soft-design-system.min.js?v=1.0.1" type="text/javascript"></script>
{% endblock javascripts %}